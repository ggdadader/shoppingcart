{"remainingRequest":"/Users/jz/shoppingcart/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jz/shoppingcart/src/components/shoppingcart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jz/shoppingcart/src/components/shoppingcart.vue","mtime":1637652891505},{"path":"/Users/jz/shoppingcart/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jz/shoppingcart/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/jz/shoppingcart/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jz/shoppingcart/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHByaWNlTGFiZWxGaWx0ZXIgfSBmcm9tICIuLi91dGlscy9taXhpbiI7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgaW5pdGlhbFNob3BwaW5nQ2FydDogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgfSwKICB9LAogIG1peGluczogW3ByaWNlTGFiZWxGaWx0ZXJdLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG9wcGluZ0NhcnQ6IHRoaXMuaW5pdGlhbFNob3BwaW5nQ2FydCwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgY2FsY1RvdGFsQW1vdW50KCkgewogICAgICBjb25zdCBzdWJ0b3RhbE9mUHJvZHVjdHMgPSB0aGlzLnNob3BwaW5nQ2FydC5wcm9kdWN0cy5yZWR1Y2UoCiAgICAgICAgKHN1bSwgY3VycmVudCkgPT4gewogICAgICAgICAgcmV0dXJuIHN1bSArIGN1cnJlbnQuc3VidG90YWw7CiAgICAgICAgfSwKICAgICAgICAwCiAgICAgICk7CiAgICAgIGNvbnN0IHRvdGFsQW1vdW50ID0gc3VidG90YWxPZlByb2R1Y3RzICsgdGhpcy5zaG9wcGluZ0NhcnQuc2hpcHBpbmdGZWU7CiAgICAgIHJldHVybiB0b3RhbEFtb3VudDsKICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgImluaXRpYWxTaG9wcGluZ0NhcnQuc2hpcHBpbmdGZWUiOiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuc2hvcHBpbmdDYXJ0LnNoaXBwaW5nRmVlID0gdGhpcy5pbml0aWFsU2hvcHBpbmdDYXJ0LnNoaXBwaW5nRmVlOwogICAgfSwKICAgIHNob3BwaW5nQ2FydDogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5zeW5jU2hvcHBpbmdMaXN0KCk7CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUsCiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgc3luY1Nob3BwaW5nTGlzdCgpIHsKICAgICAgdGhpcy5zaG9wcGluZ0NhcnQudG90YWxBbW91bnQgPSB0aGlzLmNhbGNUb3RhbEFtb3VudDsKICAgICAgdGhpcy4kZW1pdCgic2hvcHBpbmctbGlzdC1jaGFuZ2UiLCB0aGlzLnNob3BwaW5nQ2FydCk7CiAgICB9LAogICAgcXR5TWludXMocHJvZHVjdEluZGV4KSB7CiAgICAgIGlmICh0aGlzLnNob3BwaW5nQ2FydC5wcm9kdWN0c1twcm9kdWN0SW5kZXhdLnF0eSA8IDEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zaG9wcGluZ0NhcnQucHJvZHVjdHNbcHJvZHVjdEluZGV4XS5xdHktLTsKICAgICAgICB0aGlzLmhhbmRsZVF0eUNoYW5nZShwcm9kdWN0SW5kZXgpOwogICAgICB9CiAgICB9LAogICAgcXR5QWRkKHByb2R1Y3RJbmRleCkgewogICAgICB0aGlzLnNob3BwaW5nQ2FydC5wcm9kdWN0c1twcm9kdWN0SW5kZXhdLnF0eSsrOwogICAgICB0aGlzLmhhbmRsZVF0eUNoYW5nZShwcm9kdWN0SW5kZXgpOwogICAgfSwKICAgIGhhbmRsZVF0eUNoYW5nZShwcm9kdWN0SW5kZXgpIHsKICAgICAgY29uc3QgcHJvZHVjdCA9IHRoaXMuc2hvcHBpbmdDYXJ0LnByb2R1Y3RzW3Byb2R1Y3RJbmRleF07CiAgICAgIHByb2R1Y3Quc3VidG90YWwgPSBwcm9kdWN0LnF0eSAqIHByb2R1Y3QucHJpY2U7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["shoppingcart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"shoppingcart.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"shopping-cart\">\n    <div class=\"shopping-cart__shopping-list\">\n      <!-- shopping-item, v-for start  -->\n      <div\n        v-for=\"(product, index) in shoppingCart.products\"\n        :key=\"product.id\"\n        class=\"shopping-cart__shopping-list__shopping-item\"\n        data-id=\"${item.id}\"\n      >\n        <img\n          :src='null'\n          alt=\"product-img\"\n        />\n        <div class=\"shopping-cart__shopping-list__shopping-item__detail\">\n          <p class=\"shopping-cart__shopping-list__shopping-item__detail__name\">\n            {{ product.name }}\n          </p>\n          <div\n            class=\"\n              shopping-cart__shopping-list__shopping-item__detail__qty-wrapper\n            \"\n          >\n            <span\n              @click=\"qtyMinus(index)\"\n              class=\"\n                shopping-cart__shopping-list__shopping-item__detail__qty-wrapper__qty-controller\n              \"\n              >-</span\n            >\n            <span\n              class=\"\n                shopping-cart__shopping-list__shopping-item__detail__qty-wrapper__qty\n              \"\n              >{{ product.qty }}</span\n            >\n            <span\n              @click=\"qtyAdd(index)\"\n              class=\"\n                shopping-cart__shopping-list__shopping-item__detail__qty-wrapper__qty-controller\n              \"\n              >+</span\n            >\n          </div>\n          <div\n            class=\"\n              shopping-cart__shopping-list__shopping-item__detail__subtotal\n              shopping-cart__price-info\n            \"\n          >\n            {{ product.subtotal | showPriceLabel }}\n          </div>\n        </div>\n      </div>\n      <!-- v-for end -->\n    </div>\n    <div class=\"shopping-cart__shipping-fee-wrapper\">\n      <span>運費</span>\n      <span\n        class=\"\n          shopping-cart__shipping-fee-wrapper__subtotal\n          shopping-cart__price-info\n        \"\n        >{{ shoppingCart.shippingFee | showPriceLabel }}</span\n      >\n    </div>\n    <div class=\"shopping-cart__amount-wrapper\">\n      <span>小計</span>\n      <span\n        class=\"\n          shopping-cart__amount-wrapper__total-amount shopping-cart__price-info\n        \"\n        >{{ calcTotalAmount | showPriceLabel }}</span\n      >\n    </div>\n  </div>\n</template>\n\n<script>\nimport { priceLabelFilter } from \"../utils/mixin\";\nexport default {\n  props: {\n    initialShoppingCart: {\n      type: Object,\n      required: true,\n    },\n  },\n  mixins: [priceLabelFilter],\n  data() {\n    return {\n      shoppingCart: this.initialShoppingCart,\n    };\n  },\n  computed: {\n    calcTotalAmount() {\n      const subtotalOfProducts = this.shoppingCart.products.reduce(\n        (sum, current) => {\n          return sum + current.subtotal;\n        },\n        0\n      );\n      const totalAmount = subtotalOfProducts + this.shoppingCart.shippingFee;\n      return totalAmount;\n    },\n  },\n  watch: {\n    \"initialShoppingCart.shippingFee\": function () {\n      this.shoppingCart.shippingFee = this.initialShoppingCart.shippingFee;\n    },\n    shoppingCart: {\n      handler: function () {\n        this.syncShoppingList();\n      },\n      deep: true,\n    },\n  },\n  methods: {\n    syncShoppingList() {\n      this.shoppingCart.totalAmount = this.calcTotalAmount;\n      this.$emit(\"shopping-list-change\", this.shoppingCart);\n    },\n    qtyMinus(productIndex) {\n      if (this.shoppingCart.products[productIndex].qty < 1) {\n        return;\n      } else {\n        this.shoppingCart.products[productIndex].qty--;\n        this.handleQtyChange(productIndex);\n      }\n    },\n    qtyAdd(productIndex) {\n      this.shoppingCart.products[productIndex].qty++;\n      this.handleQtyChange(productIndex);\n    },\n    handleQtyChange(productIndex) {\n      const product = this.shoppingCart.products[productIndex];\n      product.subtotal = product.qty * product.price;\n    },\n  },\n};\n</script>"]}]}