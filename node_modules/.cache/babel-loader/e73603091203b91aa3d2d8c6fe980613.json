{"remainingRequest":"/Users/jz/shoppingcart/node_modules/babel-loader/lib/index.js!/Users/jz/shoppingcart/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/jz/shoppingcart/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jz/shoppingcart/src/components/shoppingcart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jz/shoppingcart/src/components/shoppingcart.vue","mtime":1637652891505},{"path":"/Users/jz/shoppingcart/babel.config.js","mtime":1636600616203},{"path":"/Users/jz/shoppingcart/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jz/shoppingcart/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/jz/shoppingcart/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jz/shoppingcart/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IHByaWNlTGFiZWxGaWx0ZXIgfSBmcm9tICIuLi91dGlscy9taXhpbiI7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgaW5pdGlhbFNob3BwaW5nQ2FydDogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9CiAgfSwKICBtaXhpbnM6IFtwcmljZUxhYmVsRmlsdGVyXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvcHBpbmdDYXJ0OiB0aGlzLmluaXRpYWxTaG9wcGluZ0NhcnQKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgY2FsY1RvdGFsQW1vdW50OiBmdW5jdGlvbiBjYWxjVG90YWxBbW91bnQoKSB7CiAgICAgIHZhciBzdWJ0b3RhbE9mUHJvZHVjdHMgPSB0aGlzLnNob3BwaW5nQ2FydC5wcm9kdWN0cy5yZWR1Y2UoZnVuY3Rpb24gKHN1bSwgY3VycmVudCkgewogICAgICAgIHJldHVybiBzdW0gKyBjdXJyZW50LnN1YnRvdGFsOwogICAgICB9LCAwKTsKICAgICAgdmFyIHRvdGFsQW1vdW50ID0gc3VidG90YWxPZlByb2R1Y3RzICsgdGhpcy5zaG9wcGluZ0NhcnQuc2hpcHBpbmdGZWU7CiAgICAgIHJldHVybiB0b3RhbEFtb3VudDsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICAiaW5pdGlhbFNob3BwaW5nQ2FydC5zaGlwcGluZ0ZlZSI6IGZ1bmN0aW9uIGluaXRpYWxTaG9wcGluZ0NhcnRTaGlwcGluZ0ZlZSgpIHsKICAgICAgdGhpcy5zaG9wcGluZ0NhcnQuc2hpcHBpbmdGZWUgPSB0aGlzLmluaXRpYWxTaG9wcGluZ0NhcnQuc2hpcHBpbmdGZWU7CiAgICB9LAogICAgc2hvcHBpbmdDYXJ0OiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgICAgdGhpcy5zeW5jU2hvcHBpbmdMaXN0KCk7CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHN5bmNTaG9wcGluZ0xpc3Q6IGZ1bmN0aW9uIHN5bmNTaG9wcGluZ0xpc3QoKSB7CiAgICAgIHRoaXMuc2hvcHBpbmdDYXJ0LnRvdGFsQW1vdW50ID0gdGhpcy5jYWxjVG90YWxBbW91bnQ7CiAgICAgIHRoaXMuJGVtaXQoInNob3BwaW5nLWxpc3QtY2hhbmdlIiwgdGhpcy5zaG9wcGluZ0NhcnQpOwogICAgfSwKICAgIHF0eU1pbnVzOiBmdW5jdGlvbiBxdHlNaW51cyhwcm9kdWN0SW5kZXgpIHsKICAgICAgaWYgKHRoaXMuc2hvcHBpbmdDYXJ0LnByb2R1Y3RzW3Byb2R1Y3RJbmRleF0ucXR5IDwgMSkgewogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNob3BwaW5nQ2FydC5wcm9kdWN0c1twcm9kdWN0SW5kZXhdLnF0eS0tOwogICAgICAgIHRoaXMuaGFuZGxlUXR5Q2hhbmdlKHByb2R1Y3RJbmRleCk7CiAgICAgIH0KICAgIH0sCiAgICBxdHlBZGQ6IGZ1bmN0aW9uIHF0eUFkZChwcm9kdWN0SW5kZXgpIHsKICAgICAgdGhpcy5zaG9wcGluZ0NhcnQucHJvZHVjdHNbcHJvZHVjdEluZGV4XS5xdHkrKzsKICAgICAgdGhpcy5oYW5kbGVRdHlDaGFuZ2UocHJvZHVjdEluZGV4KTsKICAgIH0sCiAgICBoYW5kbGVRdHlDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVF0eUNoYW5nZShwcm9kdWN0SW5kZXgpIHsKICAgICAgdmFyIHByb2R1Y3QgPSB0aGlzLnNob3BwaW5nQ2FydC5wcm9kdWN0c1twcm9kdWN0SW5kZXhdOwogICAgICBwcm9kdWN0LnN1YnRvdGFsID0gcHJvZHVjdC5xdHkgKiBwcm9kdWN0LnByaWNlOwogICAgfQogIH0KfTs="},{"version":3,"sources":["shoppingcart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA,SAAA,gBAAA,QAAA,gBAAA;AACA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,mBAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA;AADA,GADA;AAOA,EAAA,MAAA,EAAA,CAAA,gBAAA,CAPA;AAQA,EAAA,IARA,kBAQA;AACA,WAAA;AACA,MAAA,YAAA,EAAA,KAAA;AADA,KAAA;AAGA,GAZA;AAaA,EAAA,QAAA,EAAA;AACA,IAAA,eADA,6BACA;AACA,UAAA,kBAAA,GAAA,KAAA,YAAA,CAAA,QAAA,CAAA,MAAA,CACA,UAAA,GAAA,EAAA,OAAA,EAAA;AACA,eAAA,GAAA,GAAA,OAAA,CAAA,QAAA;AACA,OAHA,EAIA,CAJA,CAAA;AAMA,UAAA,WAAA,GAAA,kBAAA,GAAA,KAAA,YAAA,CAAA,WAAA;AACA,aAAA,WAAA;AACA;AAVA,GAbA;AAyBA,EAAA,KAAA,EAAA;AACA,uCAAA,0CAAA;AACA,WAAA,YAAA,CAAA,WAAA,GAAA,KAAA,mBAAA,CAAA,WAAA;AACA,KAHA;AAIA,IAAA,YAAA,EAAA;AACA,MAAA,OAAA,EAAA,mBAAA;AACA,aAAA,gBAAA;AACA,OAHA;AAIA,MAAA,IAAA,EAAA;AAJA;AAJA,GAzBA;AAoCA,EAAA,OAAA,EAAA;AACA,IAAA,gBADA,8BACA;AACA,WAAA,YAAA,CAAA,WAAA,GAAA,KAAA,eAAA;AACA,WAAA,KAAA,CAAA,sBAAA,EAAA,KAAA,YAAA;AACA,KAJA;AAKA,IAAA,QALA,oBAKA,YALA,EAKA;AACA,UAAA,KAAA,YAAA,CAAA,QAAA,CAAA,YAAA,EAAA,GAAA,GAAA,CAAA,EAAA;AACA;AACA,OAFA,MAEA;AACA,aAAA,YAAA,CAAA,QAAA,CAAA,YAAA,EAAA,GAAA;AACA,aAAA,eAAA,CAAA,YAAA;AACA;AACA,KAZA;AAaA,IAAA,MAbA,kBAaA,YAbA,EAaA;AACA,WAAA,YAAA,CAAA,QAAA,CAAA,YAAA,EAAA,GAAA;AACA,WAAA,eAAA,CAAA,YAAA;AACA,KAhBA;AAiBA,IAAA,eAjBA,2BAiBA,YAjBA,EAiBA;AACA,UAAA,OAAA,GAAA,KAAA,YAAA,CAAA,QAAA,CAAA,YAAA,CAAA;AACA,MAAA,OAAA,CAAA,QAAA,GAAA,OAAA,CAAA,GAAA,GAAA,OAAA,CAAA,KAAA;AACA;AApBA;AApCA,CAAA","sourcesContent":["<template>\n  <div class=\"shopping-cart\">\n    <div class=\"shopping-cart__shopping-list\">\n      <!-- shopping-item, v-for start  -->\n      <div\n        v-for=\"(product, index) in shoppingCart.products\"\n        :key=\"product.id\"\n        class=\"shopping-cart__shopping-list__shopping-item\"\n        data-id=\"${item.id}\"\n      >\n        <img\n          :src='null'\n          alt=\"product-img\"\n        />\n        <div class=\"shopping-cart__shopping-list__shopping-item__detail\">\n          <p class=\"shopping-cart__shopping-list__shopping-item__detail__name\">\n            {{ product.name }}\n          </p>\n          <div\n            class=\"\n              shopping-cart__shopping-list__shopping-item__detail__qty-wrapper\n            \"\n          >\n            <span\n              @click=\"qtyMinus(index)\"\n              class=\"\n                shopping-cart__shopping-list__shopping-item__detail__qty-wrapper__qty-controller\n              \"\n              >-</span\n            >\n            <span\n              class=\"\n                shopping-cart__shopping-list__shopping-item__detail__qty-wrapper__qty\n              \"\n              >{{ product.qty }}</span\n            >\n            <span\n              @click=\"qtyAdd(index)\"\n              class=\"\n                shopping-cart__shopping-list__shopping-item__detail__qty-wrapper__qty-controller\n              \"\n              >+</span\n            >\n          </div>\n          <div\n            class=\"\n              shopping-cart__shopping-list__shopping-item__detail__subtotal\n              shopping-cart__price-info\n            \"\n          >\n            {{ product.subtotal | showPriceLabel }}\n          </div>\n        </div>\n      </div>\n      <!-- v-for end -->\n    </div>\n    <div class=\"shopping-cart__shipping-fee-wrapper\">\n      <span>運費</span>\n      <span\n        class=\"\n          shopping-cart__shipping-fee-wrapper__subtotal\n          shopping-cart__price-info\n        \"\n        >{{ shoppingCart.shippingFee | showPriceLabel }}</span\n      >\n    </div>\n    <div class=\"shopping-cart__amount-wrapper\">\n      <span>小計</span>\n      <span\n        class=\"\n          shopping-cart__amount-wrapper__total-amount shopping-cart__price-info\n        \"\n        >{{ calcTotalAmount | showPriceLabel }}</span\n      >\n    </div>\n  </div>\n</template>\n\n<script>\nimport { priceLabelFilter } from \"../utils/mixin\";\nexport default {\n  props: {\n    initialShoppingCart: {\n      type: Object,\n      required: true,\n    },\n  },\n  mixins: [priceLabelFilter],\n  data() {\n    return {\n      shoppingCart: this.initialShoppingCart,\n    };\n  },\n  computed: {\n    calcTotalAmount() {\n      const subtotalOfProducts = this.shoppingCart.products.reduce(\n        (sum, current) => {\n          return sum + current.subtotal;\n        },\n        0\n      );\n      const totalAmount = subtotalOfProducts + this.shoppingCart.shippingFee;\n      return totalAmount;\n    },\n  },\n  watch: {\n    \"initialShoppingCart.shippingFee\": function () {\n      this.shoppingCart.shippingFee = this.initialShoppingCart.shippingFee;\n    },\n    shoppingCart: {\n      handler: function () {\n        this.syncShoppingList();\n      },\n      deep: true,\n    },\n  },\n  methods: {\n    syncShoppingList() {\n      this.shoppingCart.totalAmount = this.calcTotalAmount;\n      this.$emit(\"shopping-list-change\", this.shoppingCart);\n    },\n    qtyMinus(productIndex) {\n      if (this.shoppingCart.products[productIndex].qty < 1) {\n        return;\n      } else {\n        this.shoppingCart.products[productIndex].qty--;\n        this.handleQtyChange(productIndex);\n      }\n    },\n    qtyAdd(productIndex) {\n      this.shoppingCart.products[productIndex].qty++;\n      this.handleQtyChange(productIndex);\n    },\n    handleQtyChange(productIndex) {\n      const product = this.shoppingCart.products[productIndex];\n      product.subtotal = product.qty * product.price;\n    },\n  },\n};\n</script>"],"sourceRoot":"src/components"}]}